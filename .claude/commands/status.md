# status

**描述**: 显示当前创作进度和项目状态

**用法**: `/status`

**参数**: 无

**前置条件**: 无 (任何时候都可以调用)

---

## 执行流程

当用户调用 `/status` 命令时:

1. **扫描项目文件**
   - 检查 `outline.md` 是否存在
   - 检查 `characters.md` 是否存在
   - 检查 `catalog.md` 是否存在
   - 扫描 `episodes/` 目录,统计已完成的集数

2. **生成进度报告**

   报告包含以下部分:

   **a) 创作阶段状态**
   ```
   📊 项目进度概览
   
   阶段完成情况:
   ✅ 大纲创作 (outline.md) - 已完成
   ✅ 人物小传 (characters.md) - 已完成
   ✅ 分集目录 (catalog.md) - 已完成
   🔄 正文创作 (episodes/) - 进行中
   ```
   
   或者:
   ```
   📊 项目进度概览
   
   阶段完成情况:
   ❌ 大纲创作 (outline.md) - 未开始
   ⏸️  人物小传 - 等待大纲完成
   ⏸️  分集目录 - 等待人物完成
   ⏸️  正文创作 - 等待目录完成
   ```

   **b) 正文创作进度** (如果已开始正文创作)
   ```
   📝 正文创作进度
   
   已完成: 15/60集 (25.0%)
   
   进度条: ████████░░░░░░░░░░░░░░░░░░░░ 25%
   
   三幕进度:
   - 第一幕 (1-20集):  ████████████████░░░░ 15/20 (75%)
   - 第二幕 (21-45集): ░░░░░░░░░░░░░░░░░░░░ 0/25 (0%)
   - 第三幕 (46-60集): ░░░░░░░░░░░░░░░░░░░░ 0/15 (0%)
   
   最近完成: Episode 11-15
   下一批: Episode 16-20
   ```

   **c) 字数统计** (如果有正文)
   ```
   📊 字数统计
   
   已完成字数: 约10,500字
   预计总字数: 约42,000字 (基于60集×700字/集)
   完成度: 25%
   ```

   **d) 质量检查状态**
   ```
   ✅ 质量检查
   
   最近检查: Episode 11-15
   检查结果: 全部通过
   问题数: 0
   ```
   
   或者:
   ```
   ⚠️  质量检查
   
   最近检查: Episode 11-15
   检查结果: 待修复
   问题数: 2项
   建议: 输入 /check 查看详情并修复
   ```

   **e) 项目文件清单**
   ```
   📁 项目文件
   
   ├── outline.md              ✅ 故事大纲
   ├── characters.md           ✅ 人物小传
   ├── catalog.md              ✅ 分集目录
   └── episodes/               🔄 正文目录
       ├── Episode-01.md       ✅
       ├── Episode-02.md       ✅
       ├── Episode-03.md       ✅
       ├── ...
       ├── Episode-15.md       ✅
       └── Episode-16.md       ⏳ 待创作
   ```

3. **生成操作建议**

   根据当前状态,提供下一步建议:

   **场景1: 项目刚开始**
   ```
   💡 下一步建议:
   
   当前处于项目初始阶段,建议按以下顺序操作:
   1. 输入 /outline 创建故事大纲
   2. 完成后输入 /character 创建人物小传
   3. 完成后输入 /catalog 生成分集目录
   4. 完成后输入 /write 开始正文创作
   ```

   **场景2: 大纲完成,其他未完成**
   ```
   💡 下一步建议:
   
   ✅ 大纲已完成
   ⏭️  下一步: 输入 /character 创建人物小传
   ```

   **场景3: 正文创作中**
   ```
   💡 下一步建议:
   
   当前正在创作第一幕 (15/20集已完成)
   
   建议操作:
   - 输入 /write 继续创作 Episode 16-20
   - 输入 /check 检查最近5集质量
   ```

   **场景4: 某一幕完成**
   ```
   💡 下一步建议:
   
   🎉 恭喜!第一幕(1-20集)已全部完成
   
   建议操作:
   - 输入 /write 开始第二幕 (Episode 21-25)
   - 建议先通读第一幕,确认质量
   ```

   **场景5: 全部完成**
   ```
   🎉 恭喜!全部60集创作完成!
   
   📊 完成统计:
   - 总集数: 60集
   - 总字数: 约42,000字
   - 三幕结构: 全部完成
   
   💡 后续工作:
   - 通读全文进行整体把控
   - 重点检查爽点密度和节奏
   - 进行人工润色和优化
   - 确认分镜的可行性
   ```

4. **显示帮助信息** (可选)
   ```
   ❓ 常用命令
   
   /outline  - 创建或修改大纲
   /character - 创建或修改人物
   /catalog  - 生成或修改目录
   /write    - 开始或继续正文创作
   /check    - 手动触发质量检查
   /status   - 显示当前进度(本命令)
   /help     - 显示完整帮助文档
   ```

## 注意事项

- **实时更新**: status 命令实时读取文件状态,不依赖缓存
- **任何时候都可调用**: 不需要前置条件,随时可以查看进度
- **智能建议**: 根据当前状态给出最合理的下一步操作
- **进度可视化**: 使用进度条直观显示完成情况
- **文件扫描**: 自动扫描 episodes/ 目录统计完成集数

## 示例调用

**示例1: 项目刚开始**
```
用户: /status
AI: 📊 项目进度概览
    
    阶段完成情况:
    ❌ 大纲创作 (outline.md) - 未开始
    ⏸️  人物小传 - 等待大纲完成
    ⏸️  分集目录 - 等待人物完成
    ⏸️  正文创作 - 等待目录完成
    
    💡 下一步建议:
    输入 /outline 开始创建故事大纲
```

**示例2: 正文创作中**
```
用户: /status
AI: 📊 项目进度概览
    
    阶段完成情况:
    ✅ 大纲创作 (outline.md) - 已完成
    ✅ 人物小传 (characters.md) - 已完成
    ✅ 分集目录 (catalog.md) - 已完成
    🔄 正文创作 (episodes/) - 进行中
    
    📝 正文创作进度
    
    已完成: 25/60集 (41.7%)
    进度条: ████████████████░░░░░░░░░░░░ 42%
    
    三幕进度:
    - 第一幕 (1-20集):  ████████████████████ 20/20 (100%) ✅
    - 第二幕 (21-45集): ████░░░░░░░░░░░░░░░░ 5/25 (20%)
    - 第三幕 (46-60集): ░░░░░░░░░░░░░░░░░░░░ 0/15 (0%)
    
    最近完成: Episode 21-25
    下一批: Episode 26-30
    
    📊 字数统计
    已完成字数: 约17,500字
    预计总字数: 约42,000字
    完成度: 42%
    
    ✅ 质量检查
    最近检查: Episode 21-25
    检查结果: 全部通过
    
    💡 下一步建议:
    输入 /write 继续创作 Episode 26-30
```

**示例3: 全部完成**
```
用户: /status
AI: 🎉 恭喜!全部60集创作完成!
    
    📊 完成统计:
    - 总集数: 60集 ✅
    - 总字数: 约42,000字
    - 三幕结构: 全部完成 ✅
    
    三幕进度:
    - 第一幕 (1-20集):  ████████████████████ 20/20 (100%) ✅
    - 第二幕 (21-45集): █████████████████████ 25/25 (100%) ✅
    - 第三幕 (46-60集): ███████████████████ 15/15 (100%) ✅
    
    💡 后续工作:
    - 通读全文进行整体把控
    - 重点检查爽点密度和节奏
    - 进行人工润色和优化
    - 确认分镜的可行性
```