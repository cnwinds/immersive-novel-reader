# catalog

**描述**: 生成或修改60集分集目录(需要先完成大纲和人物)

**用法**: `/catalog`

**参数**: 无

**前置条件**: 必须先完成 `/outline` 和 `/character` 命令

---

## 执行流程

当用户调用 `/catalog` 命令时:

1. **检查前置条件**
   - 检查 `outline.md` 是否存在
   - 检查 `characters.md` 是否存在
   - 如果任一文件不存在,提示缺少哪个文件,并说明需要先完成前置步骤
   - 如果都存在,继续执行

2. **检查现有目录文件**
   - 如果 `catalog.md` 文件已存在,询问用户是否覆盖
   - 用户确认后继续,否则中止

3. **读取已有资源**
   - 读取 `outline.md` 获取三幕结构、天灾进程、爽点分布
   - 读取 `characters.md` 获取人物信息、出场安排、打脸时机
   - 读取 `skills/doomsday-skill/templates/doomsday-chapter-index-template.md` 获取格式规范
   - 读取 `skills/doomsday-skill/examples/catalog-example.md` 学习优秀范例

4. **生成60集分集目录**
   
   **第一幕: 重生准备+天灾爆发 (Episode 1-20)**
   
   - Episode 1-3: 重生开局
     - 主角重生回到天灾前X天
     - 回忆前世惨死经历
     - 开始第一波囤货准备
   
   - Episode 4-10: 疯狂囤积
     - 利用金手指囤积物资
     - 第一批炮灰反派出场并被打脸
     - 天灾前兆显现
   
   - Episode 11-15: 天灾爆发
     - 天灾正式降临
     - 社会秩序崩溃
     - 主角避难所优势显现
   
   - Episode 16-20: 初期生存
     - 应对第一波天灾
     - 更多炮灰反派被打脸
     - 第一幕高潮: 某个重要冲突解决
   
   **第二幕: 生存竞争+复仇进行 (Episode 21-45)**
   
   - Episode 21-30: 建立势力
     - 主角建立生存团队
     - 天灾升级到中级
     - 前世仇人陆续出场
     - 复仇线索渐次展开
   
   - Episode 31-40: 势力对抗
     - 与前世仇人正面交锋
     - 金手指能力升级
     - 天灾持续升级
     - 复仇爽点密集期
   
   - Episode 41-45: 第二幕高潮
     - 某个主要前世仇人被制裁
     - 天灾进入高级阶段预兆
     - 终极Boss浮出水面
   
   **第三幕: 终极对决+新秩序 (Episode 46-60)**
   
   - Episode 46-52: 最终准备
     - 天灾进入最高级
     - 与终极Boss的博弈开始
     - 主角能力达到巅峰
   
   - Episode 53-58: 终极对决
     - 最后的前世仇人清算
     - 与终极Boss的决战
     - 最高潮剧情
   
   - Episode 59-60: 结局收尾
     - 天灾趋于稳定
     - 新秩序建立
     - 主角的最终归宿

5. **每集标题格式**
   
   每一集都要包含:
   - 集数编号 (Episode XX)
   - 吸睛标题 (8-12字,包含关键冲突或爽点)
   - 一句话简介 (20-30字,概括本集核心剧情)
   - 关键场景 (2-3个主要场景)
   - 本集爽点 (囤货爽点/复仇爽点/其他)
   - 出场人物 (主要角色)

6. **爽点分布检查**
   - 确保每5集至少有1-2个明显爽点
   - 囤货爽点主要集中在前20集
   - 复仇爽点贯穿全剧但在21-45集最密集
   - 每20集有一个大高潮

7. **写入文件**
   - 严格按照 `doomsday-chapter-index-template.md` 的格式
   - 将分集目录写入项目根目录的 `catalog.md` 文件
   - 确保60集结构完整、节奏合理

8. **完成提示**
   ```
   ✅ 分集目录已完成并保存到 catalog.md
   
   📚 60集结构:
   - 第一幕 (1-20集): 重生准备+天灾爆发
   - 第二幕 (21-45集): 生存竞争+复仇进行
   - 第三幕 (46-60集): 终极对决+新秩序
   
   💥 爽点分布:
   - 囤货爽点: X处
   - 复仇爽点: X处
   - 大高潮: 第20/45/60集
   
   💡 下一步: 输入 /write 开始正文创作
   ```

## 注意事项

- **严格60集**: 不多不少,固定60集结构
- **三幕对应**: 1-20集/21-45集/46-60集对应起承转三幕
- **节奏控制**: 前松后紧,第三幕节奏最快
- **爽点分布**: 不能所有爽点集中在前期或后期,要均匀分布
- **天灾同步**: 天灾等级升级要与集数进度同步
- **人物出场**: 反派出场顺序要符合 characters.md 中的设定

## 示例调用

```
用户: /catalog
AI: ✅ 检测到大纲和人物已完成,开始生成分集目录...

AI: [读取outline.md和characters.md]
AI: [生成60集详细目录]
AI: [写入catalog.md]

AI: ✅ 分集目录已完成并保存到 catalog.md
     📚 60集结构:
     - 第一幕 (1-20集): 重生准备+天灾爆发
     - 第二幕 (21-45集): 生存竞争+复仇进行
     - 第三幕 (46-60集): 终极对决+新秩序
     
     💥 爽点分布:
     - 囤货爽点: 12处
     - 复仇爽点: 18处
     - 大高潮: 第20/45/60集
     
     💡 下一步: 输入 /write 开始正文创作
```